<?php declare(strict_types=1);

use DH\EPGP\Utilities\WowheadDataScraper;

require_once('../vendor/autoload.php');
require_once('../src/autoload.php');

$crawler = new WowheadDataScraper();

/*
 This dumps the item ids to the console from wowhead.
$('#tab-drops a.listview-cleartext').each(function(key, item) {
   console.log(item.href.split('=')[1].split('/')[0]);
));
 */


$itemIds = [
    'Onyxia' => [
        18422,
        18705,
        18423,
        17067,
        18813,
        17078,
        16929,
        16914,
        16900,
        16908,
        16939,
        18205,
        16921,
        16963,
        16955,
        16947,
        17068,
        17064
    ],
    'Molten Core' => [
        16665,
        16795,
        16796,
        16798,
        16800,
        16801,
        16803,
        16805,
        16808,
        16809,
        16810,
        16811,
        16812,
        16813,
        16814,
        16815,
        16816,
        16820,
        16821,
        16822,
        16823,
        16824,
        16826,
        16829,
        16831,
        16833,
        16834,
        16835,
        16837,
        16839,
        16841,
        16842,
        16843,
        16845,
        16846,
        16847,
        16848,
        16849,
        16852,
        16853,
        16854,
        16855,
        16859,
        16860,
        16862,
        16863,
        16865,
        16866,
        16867,
        16868,
        16901,
        16909,
        16915,
        16922,
        16930,
        16938,
        16946,
        16954,
        16962,
        17063,
        17065,
        17066,
        17069,
        17071,
        17072,
        17073,
        17074,
        17076,
        17077,
        17082,
        17102,
        17103,
        17104,
        17105,
        17106,
        17107,
        17109,
        17204,
        18203,
        18252,
        18260,
        18264,
        18564,
        18814,
        18815,
        18816,
        18817,
        18820,
        18821,
        18822,
        18823,
        18824,
        18829,
        18832,
        18842,
        18861,
        18872,
        18875,
        18878,
        18879,
        19136,
        19137,
        19138,
        19142,
        19143,
        19144,
        19145,
        19146,
        19147,
    ],
    'Blackwing Lair' => [
        16818,
        16832,
        16897,
        16898,
        16899,
        16902,
        16903,
        16904,
        16905,
        16906,
        16907,
        16910,
        16911,
        16912,
        16913,
        16916,
        16917,
        16918,
        16919,
        16920,
        16923,
        16924,
        16925,
        16926,
        16927,
        16928,
        16931,
        16932,
        16933,
        16934,
        16935,
        16936,
        16937,
        16940,
        16941,
        16942,
        16943,
        16944,
        16945,
        16948,
        16949,
        16950,
        16951,
        16952,
        16953,
        16956,
        16957,
        16958,
        16959,
        16961,
        16964,
        16965,
        16966,
        19002,
        19003,
        19334,
        19335,
        19336,
        19337,
        19339,
        19340,
        19341,
        19342,
        19343,
        19344,
        19345,
        19346,
        19347,
        19348,
        19349,
        19350,
        19351,
        19352,
        19353,
        19355,
        19356,
        19357,
        19360,
        19361,
        19363,
        19364,
        19365,
        19367,
        19368,
        19369,
        19370,
        19371,
        19372,
        19373,
        19374,
        19375,
        19376,
        19377,
        19378,
        19379,
        19380,
        19381,
        19382,
        19385,
        19386,
        19387,
        19388,
        19389,
        19390,
        19391,
        19392,
        19393,
        19394,
        19395,
        19396,
        19397,
        19398,
        19399,
        19400,
        19401,
        19402,
        19403,
        19405,
        19406,
        19407,
        19430,
        19431,
        19432,
        19433,
    ]
];

foreach ($itemIds as $zoneKey => $zone) {
    $i = 1;
    echo 'Processing '.$zoneKey.'...'.PHP_EOL.PHP_EOL;
    foreach ($zone as $id) {
        $loot = $crawler->getItemData($id);
        if ($loot) {
            echo $i++.': '.$loot->getName().' Processed'.PHP_EOL;
        } else echo $i++.': Failed processing item ID #'.$id.PHP_EOL;
        $loot = null;
    }
}
